<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/ xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:encuestame="http://encuesta.me/encuestame">
<body>
<ui:composition template="/templates/indexTemplate.xhtml">
	<ui:define name="toolbar">
		<encuestame:adminToolBar />
	</ui:define>
	<ui:define name="bodyOptions">
		<h:form>
			<h:panelGrid columns="8" styleClass="subMenus"
				style="padding:10px; background:#eee; width:auto;">
				<h:commandLink value="#{temp.newGroup}" action="createGroup" />
			</h:panelGrid>
		</h:form>
		<ui:insert name="optionGroup">
			<h:form>
			<h2>#{temp.titleEditGroups}</h2>
			<a4j:region id="listGroup">
				<a4j:status for="listGroup" startText="Buscando...." stopText=""></a4j:status>
				<rich:dataTable id="dataTableGroups" width="800"
					style="margin: 5px; margin-top: 12px;"
					value="#{groupBean.list_unitBeans}" var="unitGroup"
					rendered="#{groupBean.oneRow}">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column>
								<h:outputText value="#{temp.id}" />
							</rich:column>
							<rich:column>
								<h:outputText value="#{temp.name}" />
							</rich:column>
							<rich:column>
								<h:outputText value="#{temp.state}" />
							</rich:column>
							<rich:column>

							</rich:column>
						</rich:columnGroup>
					</f:facet>
					<rich:column>
						<a4j:commandLink value="#{unitGroup.groupName}" rendered="true"
							oncomplete="javascript:Richfaces.showModalPanel('panelEditGroup',{width:500, top:300})"
							reRender="formEditGroup">
							<a4j:actionparam name="processedGroupId" value="#{unitGroup.id}"
								assignTo="#{groupBean.processedGroupId}" noEscape="true" />
						</a4j:commandLink>
					</rich:column>
					<rich:column>
						<h:outputText value="#{unitGroup.groupDescription}" />
					</rich:column>
					<rich:column>
						<h:outputText value="#{unitGroup.stateId}" />
					</rich:column>
					<rich:column>
						<a4j:commandLink action="#{groupBean.deleteGroup}" reRender="dataTableGroups">
							<h:graphicImage value="#{url.img}/icons/uncheck.gif" />
							<a4j:actionparam name="processedGroupId" value="#{unitGroup.id}"
								assignTo="#{groupBean.processedGroupId}" noEscape="true" />
						</a4j:commandLink>
					</rich:column>
				</rich:dataTable>
			</a4j:region>
			<ui:fragment rendered="not #{groupBean.oneRow}">
				<h3>#{temp.notfoundGroups}</h3>
			</ui:fragment>
		</h:form>
		<rich:messages></rich:messages>
		<rich:modalPanel id="panelEditGroup">
			<h:form id="formEditGroup">
				<a4j:region id="editGroup">
					<h:panelGrid columns="2">
						<h:outputLabel value="#{temp.name}" for="name" />
						<h:inputText id="name" value="#{unitGroupBean.groupName}"
							size="40" required="true"
							requiredMessage="#{temp.validateNameGroup}" />
						<h:outputLabel value="#{temp.description}" for="desc" />
						<h:inputTextarea id="desc"
							value="#{unitGroupBean.groupDescription}" cols="40" rows="3"
							required="true" requiredMessage="#{temp.validateDescrGroup}" />
						<h:outputLabel value="#{temp.state}" for="selectState" />
						<h:selectOneMenu value="#{unitGroupBean.stateId}" id="selectState"
							required="true" requiredMessage="#{temp.validateStaterGroup}">
							<f:selectItems value="#{globalBean.loadListState}" />
						</h:selectOneMenu>
						<a4j:commandButton value="#{temp.save}"
							action="#{groupBean.updateGroup}" reRender="dataTableGroups"
							oncomplete="Richfaces.hideModalPanel('panelEditGroup')"></a4j:commandButton>
						<a4j:commandButton id="cancel_id" value="cerrar"
							onclick="Richfaces.hideModalPanel('panelEditGroup')"
							ajaxSingle="true" action="#{groupBean.reset}" />
					</h:panelGrid>
				</a4j:region>
			</h:form>
		</rich:modalPanel>

		</ui:insert>
		<!--  <h:outputText value="Grupos" />
			<a4j:commandButton value="groups" rendered="true"
				onclick="javascript:Richfaces.showModalPanel('requestStatusDlg',{width:400, top:200})">
			</a4j:commandButton>
			<rich:modalPanel id="requestStatusDlg">
				<h:outputText value="test" />
				<a4j:commandButton id="cancel_id" value="cerrar"
					onclick="Richfaces.hideModalPanel('requestStatusDlg')" />
			</rich:modalPanel>
			-->

	</ui:define>
</ui:composition>



</body>
</html>