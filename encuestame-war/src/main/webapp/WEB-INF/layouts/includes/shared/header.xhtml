<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:sec="http://www.springframework.org/security/facelets/tags"
  xmlns:rich="http://richfaces.org/rich">
    <div id="publicLineHeader">
        <div class="headerOptions">
                <form method="get" action="#{request.contextPath}/search.html">
                    <sec:ifNotGranted roles="ENCUESTAME_USER">
                        <span class="link">
                           <a href="#{request.contextPath}/signin.html">Sign In</a>
                        </span>
                    </sec:ifNotGranted>
                     <sec:ifAnyGranted roles="ENCUESTAME_USER">
                         <span class="link">
                            <a href="#{request.contextPath}/account/dashboard">My Dashboard</a>
                         </span>
                        <span class="link">
                         <span id="navbar">
                               <a href="#" onclick="showlayer('profile_menu')">#{msg.menuMyProfile}</a>
                         </span>
                        </span>
                    </sec:ifAnyGranted>
                    <span class="search">
                        <input type="text" name="search" id="search" size="20" class="defaultInputClass"
                         value="SEARCH"
                         onclick = "if(this.value=='SEARCH') this.value=''"/>
                    </span>
                    <sec:ifAnyGranted roles="ENCUESTAME_USER">
                        <span class="link">
                               <a href="#{request.contextPath}/user/logout">Log out</a>
                        </span>
                    </sec:ifAnyGranted>

                </form>
        </div>
        <div id="profile_menu" style="display:none; right: 0px;">
               <div id="detail_profile">Profile Detail<br /><br />
                <h:panelGrid columns="2">
                  <h:outputLabel value="Username" />
                  <h:outputText value="#{userProfile.details.username}" />
                  <h:outputLabel value="Email" />
                  <h:outputText value="#{userProfile.details.userEmail}" />
                  <h:outputLabel value="Name" />
                  <h:outputText value="#{userProfile.details.completeName}" />
                  <h:outputLabel value="Permissions" />
                    <h:panelGroup>
                        <a4j:repeat  value="#{userProfile.details.authorities}" var="rol">
                            <h:outputText value="#{rol}" /><br/>
                        </a4j:repeat>
                  </h:panelGroup>
                  </h:panelGrid>
               </div>
               <div id="options_profile">Options<br /><br />
                        <ul>
                            <li>
                                <img src="#{userProfile.gravatarImageUrl}" alt="#{userProfile.details.completeName}" />
                            </li>
                            <li>
                               <a href="${request.contextPath}/user/social.html">Social Accounts</a>
                            </li>
                            <li>
                               <a href="${request.contextPath}/user/lists.html">Email List</a>
                            </li>
                            <li>
                                <a href="${request.contextPath}/user/profile.html">Profile Settings</a>
                            </li>
                            <li>
                                <a href="${request.contextPath}/user/logout">Log Out</a>
                            </li>
                        </ul>
                 </div>
                 <div class="spacer"></div>
              </div>
        <div style="float: left;">
            <a href="#{request.contextPath}/home">
                <span class="logoSmallEncuestame"></span>
            </a>
        </div>
    </div>
</ui:composition>
