<ui:composition template="../../layouts/surveyTemplate.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:sf="http://www.springframework.org/tags/faces">
    <ui:define name="css">
        <a4j:loadStyle src="/resources/css/tweetpoll.css" type="text/css"></a4j:loadStyle>
    </ui:define>
    <ui:define name="title">TweetPoll</ui:define>
    <ui:define name="bodyOptions">
        <a4j:form id="formBody">
            <rich:panel rendered="#{!validate}" styleClass="error">
                <h:panelGrid columns="1" cellpadding="3" cellspacing="3">
                    <h:outputText
                        value="You need valid twitter account." />
                    <sf:commandLink
                        value=" Click here to add twitter account."
                        action="addTwitterAccount" />
                </h:panelGrid>
            </rich:panel>
            <rich:panel rendered="#{validate}">

                <rich:messages errorClass="error" infoClass="info" warnClass="war"></rich:messages>
                <div class="bodyTweet">
                <h:inputTextarea
                    id="questionResume"
                    value="#{createTweetPollBean.resumeTweet}" rows="3"
                    style="width:80%; font-size:16px;font-weight:bold:" />
                <h:inputText value="#{createTweetPollBean.countTweet}" />
                </div>
                <h:panelGrid columns="2">
                    <h:outputLabel value="Pregunta" />
                    <h:panelGroup>
                        <h:panelGrid columns="2">
                            <h:inputText value="#{createTweetPollBean.questionBean.questionName}" id="name" styleClass="textBox" size="50"/>
                        </h:panelGrid>
                         <rich:suggestionbox id="suggestionBoxId" for="name" suggestionAction="#{createTweetPollBean.suggest}" var="result"
                            tokens="," height="150" width="460" cellpadding="2"
                            cellspacing="2" shadowOpacity="4" shadowDepth="4"
                            minChars="1" rules="none" nothingLabel="No Questions Stored with this keyword">
                            <h:column>
                                <h:outputText value="#{result.questionName}" style="font-style:bold" />
                            </h:column>
                        </rich:suggestionbox>
                    </h:panelGroup>
                </h:panelGrid>
                <a4j:commandButton
                    action="#{createTweetPollBean.saveQuestion}"
                    value="Save Question" reRender="questionResume"></a4j:commandButton>
                <h2>List Of Answers</h2>
                <a4j:repeat
                    value="#{createTweetPollBean.unitTweetPoll.questionBean.listAnswers}"
                    var="answer" id="answerList">
                    <ul>
                        <li><h:outputText value="#{answer.answers}" /></li>
                    </ul>
                </a4j:repeat>
                <h:panelGrid columns="2" id="answerFormGrid">
                    <h:outputLabel value="Respuesta" />
                    <h:inputText
                        value="#{createTweetPollBean.answersBean.answers}"
                        size="50" />
                </h:panelGrid>
                <a4j:commandButton
                    action="#{createTweetPollBean.addAnswer}"
                    value="Add Answer" reRender="formBody"></a4j:commandButton>
                <a4j:commandButton
                    action="#{createTweetPollBean.deleteAllAnswers}"
                    value="Delete All Answers" reRender="formBody"></a4j:commandButton>
                <a4j:commandButton
                    action="#{createTweetPollBean.createTweetPoll}"
                    value="Save Tweet Poll" reRender="formBody"></a4j:commandButton>
            </rich:panel>
        </a4j:form>
        <h:form id="tweetPollForm" styleClass="tableWrapper">
            <rich:dataTable id="dataTableGroups" value="#{tweetsPolls}"
                var="unitTweetPoll" style="width:100%;"
                rendered="#{tweetsPolls.rowCount > 0}">
                <f:facet name="header">
                    <rich:columnGroup>
                        <rich:column width="30px">
                            <h:outputText value="#{temp.id}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{temp.description}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{temp.state}" />
                        </rich:column>
                        <rich:column>
                        </rich:column>
                    </rich:columnGroup>
                </f:facet>
                <rich:column>
                </rich:column>
                <rich:column>
                    <h:outputText
                        value="#{unitTweetPoll.questionBean.questionName}" />
                </rich:column>
                <rich:column>
                    <h:outputText value="#{unitTweetPoll.tweetUrl}" />
                </rich:column>
                <rich:column>
                </rich:column>
            </rich:dataTable>
            <rich:panel rendered="#{tweetsPolls.rowCount == 0}">
                List of TweetPolls is empty. Create your first tweetpoll.
            </rich:panel>
        </h:form>
    </ui:define>
</ui:composition>
