<ui:composition template="../../layouts/profileTemplate.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:sf="http://www.springframework.org/tags/faces"
    xmlns:sec="http://www.springframework.org/security/tags">
    <ui:define name="title">Social Profiles</ui:define>
    <ui:define name="main">
        <div id="socialWrapper"><a4j:form id="credentialsForm">
            <rich:panel>
                <h:panelGrid columns="5">
                    <h:outputText
                        value="Select your prefered authentication for this account" />
                    <h:selectOneMenu id="selectedAuth" value="#{twitterAccountBean.typeAuth}">
                        <f:selectItem itemLabel="PASSWORD"
                            itemValue="#{twitterAccountBean.PASSWORD}" />
                        <f:selectItem itemLabel="OAUTH"
                            itemValue="#{twitterAccountBean.OAUTH}" />
                        <a4j:support event="onchange" reRender="authPanel, selectedAuth"
                             actionListener="#{twitterAccountBean.updateAuth}" />
                    </h:selectOneMenu>
                </h:panelGrid>
            </rich:panel>
            <a4j:outputPanel id="authPanel">
                <ui:fragment id="password"
                    rendered="#{twitterAccountBean.typeAuth eq twitterAccountBean.PASSWORD}">
                    <h2>Twitter Credentials</h2>
                    <h:panelGrid columns="2" cellspacing="5"
                        cellpadding="5">
                        <h:outputLabel value="Username" />
                        <h:inputText
                            value="#{twitterAccountBean.unitTwitterAccountBean.account}" />
                        <h:outputLabel value="Current Password" />
                        <h:inputSecret
                            value="#{twitterAccountBean.currentPassword}" />
                        <h:commandButton value="Cancel" action="cancel"></h:commandButton>
                        <h:commandButton value="Save"
                            action="#{twitterAccountBean.saveTwitterCredentials}"></h:commandButton>
                    </h:panelGrid>
                </ui:fragment>
                <ui:fragment id="oauth"
                    rendered="#{twitterAccountBean.typeAuth eq twitterAccountBean.OAUTH}">
                    <h2>Oauth Credentials</h2>
                    <h:panelGrid columns="2" cellspacing="5"
                        cellpadding="5">
                        <h:outputLabel value="Consumer secret" />
                        <h:inputText
                            value="#{twitterAccountBean.unitTwitterAccountBean.secret}"
                            size="70" />
                        <h:outputLabel value="Consumer key" />
                        <h:inputText
                            value="#{twitterAccountBean.unitTwitterAccountBean.key}"
                            size="70" />
                        <h:outputLabel value="Twitter Pin" />
                        <h:inputText
                            value="#{twitterAccountBean.unitTwitterAccountBean.pin}" />
                        <h:commandButton value="Cancel" action="cancel"></h:commandButton>
                        <h:commandButton value="Save"
                            action="#{twitterAccountBean.saveSecretCredentials}"></h:commandButton>
                    </h:panelGrid>
                    </ui:fragment>
            </a4j:outputPanel>
        </a4j:form> <ui:fragment id="url"
            rendered="#{not empty twitterAccountBean.twitterAuthUrl}">
            <h3>You need allow access encuestame on twitter, click
            next link:</h3>
            <h:outputText value="Authentication URL Twitter:" style="" />
            <br />
            <br />
            <h:outputLink value="#{twitterAccountBean.twitterAuthUrl}"
                target="_blank">
                <h:outputText
                    value="#{twitterAccountBean.twitterAuthUrl}" />
            </h:outputLink>
        </ui:fragment></div>
    </ui:define>
</ui:composition>