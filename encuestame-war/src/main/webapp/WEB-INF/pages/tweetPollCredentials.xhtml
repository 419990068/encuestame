<ui:composition template="/templates/surveyTemplate.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:p="http://primefaces.prime.com.tr/ui">
  <ui:define name="title">TweetPoll Credentials</ui:define>
   <ui:define name="panel">
        <h:form>
             <p:accordionPanel width="100%">
                 <p:tab title="Personalization">
                    <h:commandLink value="Create Tweet" action="createTweetPoll" />
                    <br></br>
                    <h:commandLink value="List Tweet" action="tweetpoll" />
                </p:tab>
                <p:tab title="Credentials">
                    <h:commandLink value="Credentials" action="tweetPollCredentials" />
                </p:tab>
             </p:accordionPanel>
        </h:form>
   </ui:define>
   <ui:define name="bodyOptions">
      <p:ajaxStatus>
            <f:facet name="start">
                <h:graphicImage value="../images/ajax-loader.gif" />
            </f:facet>
            <f:facet name="complete">
                <h:outputText value="" />
            </f:facet>
       </p:ajaxStatus>
       <h:form id="credentialsForm">
           <p:messages showDetail="true" showSummary="true"/>
           <h2>Twitter Credentials</h2>
           <h:panelGrid  columns="2" cellspacing="5" cellpadding="5">
                <h:outputLabel value="Username" />
                <h:inputText value="#{tweetPollCredentialsBean.sessionUserBean.twitterAccount}" />
                <h:outputLabel value="Password" />
                <h:inputSecret  value="#{tweetPollCredentialsBean.sessionUserBean.twitterPassword}" required="true"/>
                <p:commandButton value="Update Credentials" action="#{tweetPollCredentialsBean.saveTwitterCredentials}" update="credentialsForm"/>
           </h:panelGrid>
        </h:form>
           <h2>Oauth Credentials</h2>
        <h:form id="credentialsSecretForm">
           <p:messages showDetail="true" showSummary="true"/>
           <h:panelGrid  columns="2" cellspacing="5" cellpadding="5">
                <h:outputLabel value="Consume Key" />
                <h:inputText value="#{tweetPollCredentialsBean.sessionUserBean.consumerTwitterKey}" size="50" />
                <h:outputLabel value="Consumer Secret" />
                <h:inputText value="#{tweetPollCredentialsBean.sessionUserBean.consumerTwitterSecret}"  size="50"/>
                <h:outputLabel value="Ping Key" />
                <h:inputText value="#{tweetPollCredentialsBean.sessionUserBean.twitterTwitterPing}" />
                <p:commandButton value="Update Credentials" action="#{tweetPollCredentialsBean.saveSecretCredentials}" update="credentialsSecretForm"/>
                <p:commandButton value="Request Pin Key" action="#{tweetPollCredentialsBean.twitterPin}" update="url"/>
           </h:panelGrid>
        </h:form>

          <ui:fragment id="url" rendered="#{not empty tweetPollCredentialsBean.twitterAuthUrl}">
             <h3>You need allow access encuestame on twitter, click next link: </h3>
                <h:outputText value="Authentication URL Twitter:" />
                <h:outputLink value="#{tweetPollCredentialsBean.twitterAuthUrl}" target="_blank">
                   <h:outputText value="#{tweetPollCredentialsBean.twitterAuthUrl}"/>
                </h:outputLink>
            </ui:fragment>
   </ui:define>
</ui:composition>
