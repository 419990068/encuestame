<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:security="http://www.springframework.org/schema/security"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/security 
       http://www.springframework.org/schema/security/spring-security-2.0.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-2.5.xsd
       http://www.springframework.org/schema/util
       http://www.springframework.org/schema/util/spring-util-2.5.xsd
       http://www.springframework.org/schema/jee
       http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">

	<!-- messages -->

	<bean id="messageSource" class="org.encuestame.web.beans.commons.MessageSourceFactoryBean">
		<property name="messagesource" ref="resourceBundleMessageSource" />
	</bean>

	<bean id="resourceBundleMessageSource"
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basename">
			<value>messages</value>
		</property>
	</bean>

	<!--  Dao  -->

	<bean id="catLocationDaoImp" class="org.encuestame.core.persistence.dao.CatLocationDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>


	<bean id="proyectDaoImp" class="org.encuestame.core.persistence.dao.ProyectDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="catStateDaoImp" class="org.encuestame.core.persistence.dao.CatStateDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="secPermissionDaoImp" class="org.encuestame.core.persistence.dao.SecPermissionDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="userDao" class="org.encuestame.core.persistence.dao.UserDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="secGroupDaoImp" class="org.encuestame.core.persistence.dao.SecGroupDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="surveyDaoImp" class="org.encuestame.core.persistence.dao.SurveyDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="questionDaoImp" class="org.encuestame.core.persistence.dao.QuestionDaoImp">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<!--  Services  -->

	<bean id="servicesManager" class="org.encuestame.web.beans.ServiceManagerBean">
		<property name="dataService">
			<ref bean="dataService"></ref>
		</property>
		<property name="surveyService">
			<ref bean="surveyService"></ref>
		</property>
		<property name="securityService">
			<ref bean="securityService"></ref>
		</property>
		<property name="applicationService">
			<ref bean="applicationService"></ref>
		</property>
		<property name="messageSource">
			<ref bean="messageSource"></ref>
		</property>
	</bean>

	<bean id="surveyService" class="org.encuestame.core.service.SurveyService">
		<property name="surveyDaoImp">
			<ref bean="surveyDaoImp"></ref>
		</property>
		<property name="serviceMail">
			<ref bean="serviceMail"></ref>
		</property>
		<property name="securityService">
			<ref bean="securityService"></ref>
		</property>
		<property name="dataService">
			<ref bean="dataService"></ref>
		</property>
		<property name="questionDaoImp">
			<ref bean="questionDaoImp"></ref>
		</property>
	</bean>

	<bean id="dataService" class="org.encuestame.core.service.DataService">
		<property name="stateDao">
			<ref bean="catStateDaoImp"></ref>
		</property>
		<property name="proyectDaoImp">
			<ref bean="proyectDaoImp"></ref>
		</property>
		<property name="catLocationDaoImp">
			<ref bean="catLocationDaoImp"></ref>
		</property>
	</bean>

	<bean id="securityService" class="org.encuestame.core.service.SecurityService">
		<property name="userDao">
			<ref bean="userDao"></ref>
		</property>
		<property name="groupDao">
			<ref bean="secGroupDaoImp"></ref>
		</property>
		<property name="permissionDao">
			<ref bean="secPermissionDaoImp"></ref>
		</property>
		<property name="serviceMail">
			<ref bean="serviceMail"></ref>
		</property>
		<property name="messageSource">
			<ref bean="messageSource"></ref>
		</property>
		<property name="defaultUserPermission">
			<value>${sec.defaultUserPermission}
			</value>
		</property>
		<property name="suspendedNotification">
			<value>${sec.suspendedNotification}
			</value>
		</property>
	</bean>

	<bean id="applicationService" class="org.encuestame.core.service.ApplicationServices">
		<property name="name">
			<value>${application.name}</value>
		</property>
		<property name="urlImg">
			<value>${application.urlImg}</value>
		</property>
		<property name="encoding">
			<value>${application.encoding}</value>
		</property>
		<property name="apiKeygoogle">
			<value>${application.apiKeygoogle}</value>
		</property>
	</bean>

	<bean id="url" class="org.encuestame.web.beans.commons.UrlBean">
		<property name="applicationService">
			<ref bean="applicationService"></ref>
		</property>
	</bean>

</beans>
