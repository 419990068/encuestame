<ui:composition template="/templates/surveyTemplate.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">
    <ui:define name="title">TweetPoll</ui:define>
    <ui:define name="panel">
        <h:form>
            <h:commandLink value="Create Tweet" action="createTweetPoll" />
            <h:commandLink value="List Tweet" action="tweetpoll" />
        </h:form>
    </ui:define>
    <ui:define name="bodyOptions">
        <h:form>
            <p:messages showDetail="true" />
            <p:dataTable var="item" value="#{tweetPolls.listTweets}"
                paginator="true" rows="20" width="100%"
                selection="#{tweetPolls.selectedTweetPoll}"
                selectionMode="single" update="display"
                onselectComplete="tweetDialog.show()">
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Id" />
                    </f:facet>
                    <h:outputText value="#{item.id}" />
                </p:column>

                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Question Name" />
                    </f:facet>
                    <h:outputText
                        value="#{item.questionBean.questionName}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Publicada?" />
                    </f:facet>
                    <h:outputText value="#{item.publishPoll}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Tweet Publicado" />
                    </f:facet>
                    <h:outputText value="#{item.publicationDateTweet}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="TwitterId" />
                    </f:facet>
                    <h:outputText value="#{item.tweetId}" />
                </p:column>
            </p:dataTable>
            <p:dialog header="Tweet Poll Detail" widgetVar="tweetDialog"
                modal="true" fixedCenter="true" draggable="false"
                width="650px">
                <p:tabView>
                    <p:tab title="Details">
                        <h:form>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Question" />
                                <h:outputText value="#{tweetPolls.selectedTweetPoll.questionBean.questionName}" />
                            </h:panelGrid>
                        </h:form>
                    </p:tab>
                    <p:tab title="Results">
                     <p:pieChart id="display" value="#{tweetPolls.selectedTweetPoll.results}" var="tweet" categoryField=" #{tweet.label}"
                                  dataField="#{tweet.result}" />
                     </p:tab>
                    <p:tab title="Retweets">

                    </p:tab>
                </p:tabView>
            </p:dialog>
        </h:form>

    </ui:define>
</ui:composition>
